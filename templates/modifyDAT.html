<!--
-    Copyright (c) UChicago Argonne, LLC. All rights reserved.
-
-    Copyright UChicago Argonne, LLC. This software was produced
-    under U.S. Government contract DE-AC02-06CH11357 for Argonne National
-    Laboratory (ANL), which is operated by UChicago Argonne, LLC for the
-    U.S. Department of Energy. The U.S. Government has rights to use,
-    reproduce, and distribute this software.  NEITHER THE GOVERNMENT NOR
-    UChicago Argonne, LLC MAKES ANY WARRANTY, EXPRESS OR IMPLIED, OR
-    ASSUMES ANY LIABILITY FOR THE USE OF THIS SOFTWARE.  If software is
-    modified to produce derivative works, such modified software should
-    be clearly marked, so as not to confuse it with the version available
-    from ANL.
-
-    Additionally, redistribution and use in source and binary forms, with
-    or without modification, are permitted provided that the following
-    conditions are met:
-
-        * Redistributions of source code must retain the above copyright
-          notice, this list of conditions and the following disclaimer.
-
-        * Redistributions in binary form must reproduce the above copyright
-          notice, this list of conditions and the following disclaimer in
-          the documentation and/or other materials provided with the
-          distribution.
-
-        * Neither the name of UChicago Argonne, LLC, Argonne National
-          Laboratory, ANL, the U.S. Government, nor the names of its
-          contributors may be used to endorse or promote products derived
-          from this software without specific prior written permission.
-
-    THIS SOFTWARE IS PROVIDED BY UChicago Argonne, LLC AND CONTRIBUTORS
-    AS IS AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
-    FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL UChicago
-    Argonne, LLC OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
-    INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
-    BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-    LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
-    CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
-    LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
-    ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
-    POSSIBILITY OF SUCH DAMAGE.
-->
<!DOCTYPE html>
{% from "__autoindex__/macros.html" import thead
with context %}
<!--This is how you comment-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initialscale=1" name="viewport">
    <title>Scandataproc</title>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="/static/bootstrap.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <link rel="stylesheet" href="/static/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/js/bootstrap-dialog.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/css/bootstrap-dialog.min.css">
    <link href="/static/modifyDAT/modifyDAT.css" rel="stylesheet">
    <script type="text/javascript" src="/static/modifyDAT/modifyDAT.js"></script>
    <script type="text/javascript" src="/static/mpld3.v0.2.js"></script>


</head>
<body role="document">
<div id="remBackModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Remove Background</h4>
            </div>
            <div class="remBackModalBody">
                <label for="flatRad" class="flatLabel floatL">Remove Flat Value</label>
                <div class="input-group remFlat">
                    <span class="input-group-addon">
                        <input type="radio" id="flatRad" name="methodRad" aria-label="...">
                    </span>
                    <input type="text" class="form-control" id="flatVal" placeholder="Y-Value" aria-label="...">
                </div>
                <label for="linearRad" class="linLabel floatL">Remove Linear Line</label>
                <div class="input-group remLin">
                    <span class="input-group-addon">
                        <input type="radio" id="linearRad" name="methodRad" aria-label="...">
                    </span>
                    <input type="text" class="form-control" id="leftX" style="width:25%" placeholder="Left X" aria-label="...">
                    <input type="text" class="form-control" id="leftY" style="width:25%" placeholder="Left Y" aria-label="...">
                    <input type="text" class="form-control" id="rightX" style="width:25%" placeholder="Right X" aria-label="...">
                    <input type="text" class="form-control" id="rightY" style="width:25%" placeholder="Right Y" aria-label="...">
                </div>
                <label for="avRad" class="avLabel">Remove Averaged Line</label>
                <input type="radio" class="avRad" id='avRad' name="methodRad" aria-label="...">
            </div>
            <div class="remBackModalFooter">
                <div class="col-xs-4">
                    <span class="centerBlock">
                        <button type="button" onclick="remBackground()" class="btn btn-primary btn-default" data-dismiss="modal">Apply</button>
                    </span>
                </div>
                <div class="col-xs-4">
                    <span class="centerBlock">
                        <button type="button" class="btn btn-primary btn-default" onclick="resetPlot()" data-dismiss="modal">Reset</button>
                    </span>
                </div>
                <div class="col-xs-4">
                    <span class="centerBlock">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="getAvModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Remove Background</h4>
            </div>
            <div class="remBackModalBody">
                <label class="leftIn" style="margin-top:30px;">Left Inpoint</label>
                <br/>
                <input type="text" id="leftIn" class="floatL leftIn form-control" placeholder="X-Point from plot(meV)">

                <label class="rightIn">Right Inpoint</label>
                <br/>
                <input type="text" id="rightIn" class="floatL rightIn form-control" placeholder="X-Point from plot(meV)">
            </div>
            <div class="remBackModalFooter">
                <div class="col-xs-6">
                    <span class="centerBlock">
                        <button type="button" class="btn btn-primary btn-default" data-dismiss="modal" onclick="averageRange()">Average</button>
                    </span>
                </div>
                <div class="col-xs-6">
                    <span class="centerBlock">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" aria-controls="navbar" aria-expanded="false" data-target="#navbar"
                    data-toggle="collapse" type="button">
                <span class="sr-only">
                    Toggle navigation
                </span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="login">
                Scandataproc
            </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                {% if user.isAdmin == 1 %}
                <li>
                    <a href="admin">
                        Admin
                    </a>
                </li>
                {% endif %}
                <li>
                    <a href="profile">
                        Profile
                    </a>
                </li>
                <li>
                    <a href="upload">
                        Manage Files
                    </a>
                </li>
                <li>
                    <a href="select">
                        Select Session
                    </a>
                </li>
                <li>
                    <a href="data">
                        Format
                    </a>
                </li>
                <li>
                    <a href="process">
                        Sum
                    </a>
                </li>
                <li class="active">
                    <a href="modifyDAT">
                        Modify DAT
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container data-select" role="main">
    <br/>
    <br/>
    <br/>
    <div class="pull-right margin-info">
        <p class="margin-text" align="right">Logged in as <a href="/profile">{{ user.username }}</a>
            <br/>
            <a href="/db">Logbook</a>
            <br/>
            <a href="/logout">Logout</a>
            <br/>
        </p>
    </div>
    <div class="sessionName" id="sesName">
        {{ ses }}
    </div>
    <div id="mainContent">
        <div id="leftCol" class="floatL">
            <div class="buttons">
                <div>
                    <button id="averageRange" type="button" class="btn btn-primary btn-md" title="Average the extremities of the plot" data-toggle="modal" data-target="#getAvModal">Average Range</button>
                </div>
                <div>
                    <button id="remBackground" type="button" class="btn btn-primary btn-md" title="Remove various types of background from plot" data-toggle="modal" data-target="#remBackModal">Remove Background</button>
                </div>
            </div>
        </div>
        <div id="rightCol" class="floatR">
             <div id="process_plot" class="plot">
                {{code|safe}}
            </div>
            <form id="output-form" method=post action="">
                <input type="hidden" name="outType" id="outType">
                <input type="hidden" name="datFName" id="datFName">
            </form>
            <div class="text-center output" id="outputBtn">
                <button onclick="outputFile()" class="btn btn-primary btn-md" title="Display or save output file">
                    Output
                </button>
            </div>
        </div>
    </div>
</div>
<footer>
    <div class="text-center">
        <p>Copyright (c) UChicago Argonne, LLC. All rights reserved.</p>
    </div>
</footer>
</body>
</html>