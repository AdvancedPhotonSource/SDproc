{% extends "layout.html" %}

{% block static %}
    <link rel="stylesheet" href="/static/session/session.css">

{% endblock static %}

{% block content %}
    <div class="content">
        <div class="jumbotron">
            <h3>Select How to Proceed</h3>
            <p>Choose to start a new session or continue a previous session.</p>
            <p class="smallText">Use browser zoom if everything does not fit on your screen (Ctrl and +/- or Cmd and +/-)</p>
        </div>
        <div class="row text-center">
            <div class="col-md-6">
                <button class="btn btn-primary btn-lg" onclick="continue_session()">Continue Session</button>
            </div>
            <div class="col-md-6">
                <button class="btn btn-primary btn-lg" onclick="new_session()">Start New Session</button>
            </div>
        </div><br>
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12 text center">
                        <label for="search" class="form-control-label">Search</label>
                        <input class="form-control" id="search" type="text" placeholder="Search.."><br>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 scroll">
                        <table class="table table-bordered text-center">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Last Modified</th>
                                </tr>
                            </thead>
                            <tbody id="sessionTable">
                                {% for session in sessions %}
                                    <tr class="click-able" id="{{ session.id }}" type="session" name="{{ session.name }}">
                                        <td>{{ session.name }}</td>
                                        <td>{{ session.last_used }}</td>
                                    </tr>
                                {% endfor %}
                                {% for data_file in data_files %}
                                    <tr class="click-able" id="{{ data_file.id }}" type="{{ data_file.type }}" name="{{ data_file.name }}">
                                        <td>{{ data_file.name }}</td>
                                        <td> - </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-center"><br>
                        <button class="btn btn-danger" onclick="delete_modal()">Delete</button><br><br>
                    </div>
                    <div class="col-md-6 text-center"><br>
                        <button class="btn btn-info" onclick="share_modal()">Share</button><br><br>
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-center">
                <div class="row">
                    <div class="col-md-12">
                        <label for="comment" class="form-control-label">Comment(s):</label>
                        <textarea class="form-control" rows="5" id="comment" name="comment"></textarea><br>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 ">
                        <button class="btn btn-info " onclick="save_comment()" title="Save the new comment">Save Comment</button><br><br>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalTitle">Delete</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="delete-modal-body"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="delete_session()">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="shareModalTitle">Share</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="share-modal-body">
                    <p>Choose a user to share the file with:</p>
                    <table class="table table-bordered text-center">
                            <thead>
                                <tr>
                                    <th>Users</th>
                                </tr>
                            </thead>
                            <tbody id="usersTable">
                                {% for user in users %}
                                    <tr class="click-user" id="{{ user.id }}" name="{{ user.username }}">
                                        <td>{{ user.username }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-info" onclick="share_session()">Share</button>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block scripts %}
    <script type="text/javascript" src="/static/session/session.js"></script>
{% endblock scripts %}